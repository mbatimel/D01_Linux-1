## Часть 1. Установка ОС ##
Установил Ubuntu 20.04 Server LTS без графического интерфейса.
![df01](../src/Screenshots/df01.png)

*рис. 1 Установка ОС*

## Часть 2. Создание пользователя ##
Создал ещё одного пользователя Ildar, отличного от пользователя gardnerg, который создавался при установке. Пользователя Ildar добавил в группу adm.
![df02.1](../src/Screenshots/df02.1.png)

*рис. 2 Добавил пользователя*

![df02.2](../src/Screenshots/df02.2.png)

*рис. 3 Проверил добавление пользователя*

## Часть 3. Настройка сети ОС ##
Отобразил 24 часовую зону: Россия/Москва
![df03.1](../src/Screenshots/df03.1.png)

*рис. 4 Время на момент написания отчета*

Вывел названия сетевых интерфейсов с помощью консольных команд
![df03.2](../src/Screenshots/df03.2.png)

*рис. 5 Сетевые интерфейсы*

На Unix системах интерфейс loopback (lo) - механизм который реализует виртуальный сетевой интерфейс. Это петлевой интерфейс с IP-адресом 127.0.0.1 обычно используемый для эмуляции передачи данных в пределах данной системы.

Используя консольную команду "hostname -I" получил от DHCP сервера ip адрес устройства, на котором работал.
![df03.3](../src/Screenshots/df03.3.png)

*рис. 6 IP*

Dynamic Host Configuration Protocol, DHCP (протокол динамической конфигурации узлов) – это сетевой протокол, используемый для автоматического получения узлами IP-адресов и сетевой конфигурации с сервера. IP-адрес, выделенный DHCP-клиенту DHCP-сервером, находится в «аренде», время аренды может отличаться в зависимости от того, сколько времени клиенту требуется соединение или конфигурация DHCP.

Определил (ip route), вывел на экран внешний IP-адрес шлюза (ip) 192.168.64.1 и внутренний IP-адрес шлюза (gw) 192.168.64.3

![df03.4](../src/Screenshots/df03.4.png)

*рис. 7 ADDRESS*

Задал статичные настройки ip, gw, dns, использовал публичный DNS сервер: 8.8.8.8. После перезагрузки виртуальной машины убедился, что статичные сетевые настройки (ip, gw, dns) соответствуют ранее заданным.
Команда: sudo nano /etc/netplan/*

![df03.5](../src/Screenshots/df03.5.png)

*рис. 8 Настрокйка*

![df03.6](../src/Screenshots/df03.6.png)

*рис. 9 проверка 8.8.8.8*

![df03.7](../src/Screenshots/df03.7.png)

*рис. 10 проверка ya.ru*

## Часть 4. Обновление ОС ##
Обновил системные пакеты до последнего на момент выполнения задания.

![df04](../src/Screenshots/df04.png)

*рис. 11 обновление*

## Часть 5. Использование команды sudo ##
sudo — это утилита, предоставляющая привилегии суперпользователя (root - он же суперпользователь который имеет право на выполнение всех операций) для выполнения административных операций в соответствии со своими настройками. Утилита позволяет легко контролировать доступ к важным приложениям в системе. Поменял hostname ОС  от имени пользователя Ildar


![df05.1](../src/Screenshots/df05.1.png)

*рис. 12 права*

![df05.2](../src/Screenshots/df05.2.png)

*рис. 13 Переименовал*

## Часть 6. Установка и настройка службы времени ##
Настроил службу автоматической синхронизации времени

![df06](../src/Screenshots/df06.png)

*рис. 14 Время приключений!!!*

## Часть 7. Установка и использование текстовых редакторов ##
Установил текстовые редакторы Vi/Vim, Nano, JOE. Создал три текстовых файла: test_VIM.txt, test_NANO.txt, test_JOE.txt. Содержание каждого файла: gardnerg.

Для создания файла test_VIM.txt набрал команду vim, в файл ввёл свой никнейм. Для выхода из редактора и сохранения файла набрал :w test_VIM.txt.
![df07.1](../src/Screenshots/df07.1.png)

*рис. 15 VIM*

Для создания файла test_NANO.txt набрал команду nano, в файл ввёл свой никнейм. Для выхода из редактора и сохранения файла набрал CTRL + O далее в появившейся строке набрал test_NANO.txt. Далее Enter, выход из редактора CTRL + X.
![df07.2](../src/Screenshots/df07.2.png)

*рис. 16 NANO*

Для создания файла test_JOE.txt набрал команду joe, в файл ввёл свой никнейм. Для выхода из редактора и сохранения файла набрал Ctrl + K, далее Q и Y ввёл название файла test_JOE.txt.
![df07.3](../src/Screenshots/df07.3.png)

*рис. 17 JOE*

Открыл файл test_Vim.txt на редактирование (vim test_VIM.txt) отредактировал файл, заменил никнейм на строку "21 School 21", закрыл файл без сохранения изменений (:q!).
![df07.4](../src/Screenshots/df07.4.png)

*рис. 18 VIM без сохранения*

Открыл файл test_NANO.txt на редактирование (nano test_NANO.txt) отредактировал файл, заменил никнейм на строку "21 School 21", закрыл файл без сохранения изменений (CTRL + X, далее N).
![df07.5](../src/Screenshots/df07.5.png)

*рис. 19 NANO без сохранения*

Открыл файл test_JOE.txt на редактирование (joe test_JOE.txt) отредактировал файл, заменил никнейм на строку "21 School 21", закрыл файл без сохранения изменений (Ctrl + С, далее N).
![df07.6](../src/Screenshots/df07.6.png)

*рис. 20 JOE без сохранения*

Используя редактор Vim добавил в файл слова (отредактировал не сохраняя). Изучил функцию поиска по содержимому файла (слово целиком).
![df07.7](../src/Screenshots/df07.7.png)

*рис. 21 VIM поиск*

Изучил функцию замены объектов в файле, осуществил замену старых объектов на новые объекты
![df07.8](../src/Screenshots/df07.8.png)

*рис. 22 VIM замена*

Используя редактор Nano добавил в файл слова (отредактировал не сохраняя). Изучил комбинацию клавиш поиска по содержимому файла (CTRL + ^ + W).
![df07.9](../src/Screenshots/df07.9.png)

*рис. 23 NaNO поиск*

Изучил комбинация клавиш замены объектов в файле, осуществил замену старых_объектов на новые_объекты Комбинация клавиш Ctrl + \ далее ввёл строку (что меняем), нажал Enter, далее ввёл строку (на что меняем) нажал Enter, для замены во всём файле нажал А.
![df07.10](../src/Screenshots/df07.10.png)

*рис. 24 NANO замена*

Используя редактор Joe добавил в файл слова (отредактировал не сохраняя). Изучил комбинацию клавиш поиска по содержимому файла (CTRL + K, далее F), объект поиска, перемещение по файлу при поиске (CTRL + L).
![df07.11](../src/Screenshots/df07.11.png)

*рис. 25 JOE поиск*

Изучил комбинация клавиш замены объектов в файле, осуществил замену старых_объектов на новые_объекты Комбинация клавиш (CTRL + K, далее F), далее ввёл строку (что меняем), нажал Enter, далее для замены во всём файле нажал R. Далее ввёл строку (на что меняем), при подстветке объектов замены в тексте нажимал Y.
![df07.12](../src/Screenshots/df07.12.png)

*рис. 26 JOE замена*

## Часть 8. Установка и базовая настройка сервиса SSHD ##
*Проверил установлен ли протокол ssh (dpkg -l и ps aux | grep sshd) да протокол был установлен при обновлении системы.
*Проверил работу сервера, он должен был добавиться в автозагрузку автоматически проверил (sudo systemctl enable sshd).
![df08.1](../src/Screenshots/df08.1.png)

*рис. 27 SSHD check*

*Перенастроил протокол SSHd на порт 2022, отредактировав файл конфигурации (sudo nano /etc/ssh/sshd_config).
*Строку #Port 22 заменил на Port 2022
![df08.2](../src/Screenshots/df08.2.png)

*рис. 28 SSHD port_config*
*Создал новый ключ клиента, (ssh-keygen -t dsa) создал файл, указал пароль для доступа.
*Перезапустил сервер и проверил его корректность работы через открытый и секретный ключ(sudo systemctl enable sshd).
*Ввод команды ps предоставит нам информацию о запущенных процессах в текущей оболочке, проверим наличие процесса sshd.
![df08.3](../src/Screenshots/df08.3.png)

*рис. 29 SSHD*

### Команда ps с флагами: ###

-с - отобразит информацию планировщика;
-f - выведет максимум доступных данных;
-F - аналогично -f, только выводит ещё больше данных;
-l - длинный формат вывода;
-j, (j) - выводит процессы в стиле Jobs, минимум информации;
-M, (Z) - выведет информацию о безопасности;
-o, (o) - определяем свой формат вывода;
--sort, (k) - сортируем по указанной колонке;
-L, (H)- отобразим потоки процессов в колонках LWP и NLWP;
-m, (m) - выввод потоки после процесса;
-V, (V) - вывод информацию о версии;
-H - вывод дерево процессов;
Команда netstat отображает различную информацию, такую как сетевые подключения, статистику интерфейсов, таблицы маршрутизации, и т.п.

t информация по протоколам TCP;
a информация о состояние всех сокетов (портов) прослушиваемых и нет;
n информация о сетевых адресах показанных в формате числа;
0.0.0.0:* это означает, что подключение может быть выполнено на любой внешний адрес
Ввёл команду sudo lsof -i :2022.
![df08.4](../src/Screenshots/df08.4.png)

*рис. 30 SSHD*

Proto - протокол TCP или UDP
Recv-Q - Счётчик байт не скопированных программой пользователя из этого сокета
Send-Q - Счётчик байтов, не подтверждённых удалённым узлом
Local Address - IP -адрес локального компьютера и номер используемого порта
Foreign Address - IP -адрес и номер порта удалённого компьютера, к которому подключен сокет если есть *, значит порт ещё не установлен
State - указывает состояние TCP - соединения
## Часть 9. Установка и использование утилит top, htop ##
запустил утилиту top(утилита была у меня установлена при обновлении, если была бы не утсановлена ввел бы sudo apt istall top).
uptime 14
количество авторизованных пользователей 1
общая загрузку системы 0.05
общее количество процессов 138
загрузка cpu
процент времени процессора, затраченного на выполнение пользовательских процессов (us) 0.2
процент времени процессора, затраченного на выполнение процессов ядра (sy) 0.3
процент времени процессора, затраченного на выполнение пользовательских процессов с ограничениями (ni) 0.0
процент времени процессора проведённое в режиме ожидания (id) 99.4
процент времени процессора потраченное на ожидание на периферийных устройствах (wa) 0.0
загрузка памяти
физическая память (Mem)
общий объем ОЗУ (total) 3907.8
количество свободной памяти (free) 3401.9
количество занятой памяти (used) 177.6
зарезервированная системой память (buff/cache) 177.6
виртуальная память или пространство подкачки (Swap)
общий объем ОЗУ (total) 0.0
количество свободной памяти (free) 0.0
количество занятой памяти (used) 0.0
память который может быть выделена для процессов, не использую большую область диска (avail Mem) 3497.7
pid процесса занимающего больше всего памяти 1093
pid процесса, занимающего больше всего процессорного времени 1093
![df09.1](../src/Screenshots/df09.1.png)

*рис. 31 TOP*

Установил и запустил утилиту htop Отсортировал по PID
![df09.2](../src/Screenshots/df09.2.png)

*рис. 32 HTOP PID*
Отсортировал по PERCENT_CPU
![df09.3](../src/Screenshots/df09.3.png)

*рис. 33 HTOP PERCENT_CPU*
Отсортировал по PERCENT_MEM
![df09.4](../src/Screenshots/df09.4.png)

*рис. 34 HTOP PERCENT_MEM*
Отсортировал по TIME
![df09.5](../src/Screenshots/df09.5.png)

*рис. 35 HTOP TIME*
Отфильтровавал по процессу sshd
![df09.6](../src/Screenshots/df09.6.png)

*рис. 36 HTOP по процессу sshd*
Нашёл процессы с syslog
![df09.7](../src/Screenshots/df09.7.png)

*рис. 37 HTOP syslog*
Вывел процессы с добавлением hostname, clock и uptime
![df09.8](../src/Screenshots/df09.8.png)

*рис. 38 Процессы с добавлением hostname, clock и uptime*
## Часть 10. Использование утилиты fdisk##
Команда fdisk -l вывела информацию о доступных мне дисках и разделах на них Описание диска:

название жёсткого диска sda (sd блочное устройство как правило SCSI, a - найдено первым);
его размер 15 GiB;
количество секторов на диске 31457280;
размер swap 2.0 GiB(free -h)
![df10](../src/Screenshots/df10.png)

*рис. 39 Утилита fdisk*
## Часть 11. Использование утилиты df ##
Запустил команду df.

Для корневого раздела (/) (/dev/mapper/ubuntu--vg-ubuntu-lv):

размер раздела 10218772 KiB
размер занятого пространства 3249060 KiB
размер свободного пространства 6429040 KiB
процент использования 34%
![df11.1](../src/Screenshots/df11.1.png)

*рис. 40 Утилита df /*
Запустил команду df -Th.

Для корневого раздела (/) (/dev/mapper/ubuntu--vg-ubuntu-lv):

размер раздела 9.8 GiB
размер занятого пространства 3.1 GiB
размер свободного пространства 6.2 GiB
процент использования 34%
![df11.2](../src/Screenshots/df11.2.png)

*рис. 41 Утилита df -Th /*
## Часть 12. Использование утилиты du ##
Запустил команду du

Вывел размер содержимого папок home, log (в байтах, в человекочитаемом виде)
![df12.1](../src/Screenshots/df12.1.png)

*рис. 42 Утилита du /home and /var/log*
Вывел размер содержимого папи var (в байтах, в человекочитаемом виде)
![df12.2](../src/Screenshots/df12.2.png)

*рис. 43 Утилита du /var*
Вывел размер содержимого в var/log (не всего, а каждого вложенного элемента, используя *)
![df12.3](../src/Screenshots/df12.3.png)

*рис. 44 Утилита du /var/log\**
## Часть 13. Установка и использование утилиты ncdu ##
Установил утилиту ncdu (sudo apt install ncdu).

Вывел размер папки home.
![df13.1](../src/Screenshots/df13.1.png)

*рис. 45 dir /home*
Вывел размер папки var.
![df13.2](../src/Screenshots/df13.2.png)

*рис. 46 dir /var*
Вывел размер папки var/log.
![df13.3](../src/Screenshots/df13.3.png)

*рис. 47 dir /var/log*
## Часть 14. Работа с системными журналами ##
В папке log просмотрел файлы: dmesg, syslog, auth.log

Время последней успешной авторизации - 22:42:01
Имя пользователя - gardnerg-ildar
Метод входа в систему - для входа использовалось sshd соединение, аутентификации в режиме pam_unix (проверялось действительность пользователя по предоставленному паролю. Информацию о пароле пользователя система ищет в соответствии с алгоритмом, заданным в конфигурационном файле).
![df14.1](../src/Screenshots/df14.1.png)

*рис. 48 log в файлах*
Перезапустил службу SSHd. Просмотрел сообщение в логах о рестарте службы.
![df14.2](../src/Screenshots/df14.2.png)

*рис. 49 log  sshd*
## Часть 15. Использование планировщика заданий CRON ##
Написал скрипт, в планировщике заданий создал добавил задание с написанным скриптом, (запуск uptime через каждые 2 минуты).
![df15.1](../src/Screenshots/df15.1.png)

*рис. 50 сприпт*

![df15.2](../src/Screenshots/df15.2.png)

*рис. 51 добавил вкрипт в crontab*

![df15.3](../src/Screenshots/df15.3.png)

*рис. 52 список заданий*
Удалил задание из планировщика заданий (изменил файл, другой способ crontab -r).
![df15.4](../src/Screenshots/df15.4.png)

*рис. 53 удалил задание*

#ВОТ И СКАЗОЧКЕ КОНЕЦ, А КТО СЛУШАЛ МОЛОДЕЦ!!!#